{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\joaoc\\\\Documents\\\\GitHub\\\\DIAM-PROJETO\\\\beer_budies_frontend\\\\src\\\\Pages\\\\mapa.js\",\n  _s = $RefreshSig$();\n//para correr o mapa é necessário fazer \"c\" e \"npm install leaflet.markercluster\"\n//localStorage.setItem('token', 'fake-token'); // Simula o login do utilizador\n//localStorage.removeItem('token'); // Simula o logout do utilizador\n//localStorage.clear(); // Limpa o localStorage\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport '../cssFiles/mapa.css';\nimport * as L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport 'leaflet.markercluster';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Mapa({\n  onBebidaAdicionada\n}) {\n  _s();\n  const [showForm, setShowForm] = useState(false);\n  const [formData, setFormData] = useState({\n    local: '',\n    evento: '',\n    cervejas: '',\n    coordenadas: ''\n  });\n  const [isLoggedIn, setIsLoggedIn] = useState(!!localStorage.getItem('access'));\n  const mapRef = useRef(null);\n  const coordenadasInputRef = useRef(null);\n  const clusterLayerRef = useRef(null);\n  const customIcon = L.icon({\n    iconUrl: require('../Icons/PINGbeer.png'),\n    iconSize: [38, 38]\n  });\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setIsLoggedIn(!!localStorage.getItem('access'));\n    }, 500);\n    return () => clearInterval(interval);\n  }, []);\n  useEffect(() => {\n    let map = mapRef.current;\n    if (!map) {\n      map = L.map(\"map\").setView([38.75441377685015, -9.152601469815817], 13);\n      mapRef.current = map;\n      L.tileLayer(\"https://tile.openstreetmap.org/{z}/{x}/{y}.png\", {\n        maxZoom: 19\n      }).addTo(map);\n    }\n    // Remove cluster layer antigo se existir\n    if (clusterLayerRef.current) {\n      if (map.hasLayer(clusterLayerRef.current)) {\n        map.removeLayer(clusterLayerRef.current);\n      }\n      clusterLayerRef.current.clearLayers();\n    }\n    const myClusterLayer = L.markerClusterGroup({\n      iconCreateFunction: function (cluster) {\n        return L.divIcon({\n          html: '<div class=\"cluster-div\">' + cluster.getChildCount() + '</div>'\n        });\n      }\n    });\n    clusterLayerRef.current = myClusterLayer;\n    map.addLayer(myClusterLayer);\n  }, []);\n  useEffect(() => {\n    return () => {\n      if (mapRef.current && clusterLayerRef.current && mapRef.current.hasLayer(clusterLayerRef.current)) {\n        mapRef.current.removeLayer(clusterLayerRef.current);\n      }\n    };\n  }, []);\n  useEffect(() => {\n    if (!mapRef.current) return;\n    const handleMapClick = function (e) {\n      const coords = `${e.latlng.lat},${e.latlng.lng}`;\n      setFormData(f => ({\n        ...f,\n        coordenadas: coords\n      }));\n      setShowForm(true);\n      setTimeout(() => {\n        if (coordenadasInputRef.current) {\n          coordenadasInputRef.current.focus();\n        }\n      }, 100);\n    };\n    mapRef.current.on('click', handleMapClick);\n\n    // Cleanup: remove event listener on unmount\n    return () => {\n      mapRef.current.off('click', handleMapClick);\n    };\n  }, []);\n  useEffect(() => {\n    if (isLoggedIn && mapRef.current && clusterLayerRef.current && mapRef.current.hasLayer(clusterLayerRef.current)) {\n      clusterLayerRef.current.clearLayers();\n      fetch('http://localhost:8000/beer_budies/api/minhas_bebidas/', {\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('access')}`\n        }\n      }).then(res => res.json()).then(data => {\n        if (Array.isArray(data)) {\n          data.forEach(bebida => {\n            if (bebida.coordenadas) {\n              const [lat, lng] = bebida.coordenadas.split(',').map(Number);\n              const marker = L.marker([lat, lng], {\n                icon: customIcon\n              }).bindPopup(`<h3>${bebida.evento || 'Evento'}</h3><p>${bebida.local || ''}</p>`);\n              clusterLayerRef.current.addLayer(marker);\n            }\n          });\n        }\n      });\n    }\n  }, [isLoggedIn, customIcon]);\n  const handleChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const response = await fetch('http://localhost:8000/beer_budies/api/adicionar_bebida/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${localStorage.getItem('access')}`\n      },\n      body: JSON.stringify(formData)\n    });\n    if (response.ok) {\n      alert('Bebida registada com sucesso!');\n      setShowForm(false);\n      setFormData({\n        local: '',\n        evento: '',\n        cervejas: '',\n        coordenadas: ''\n      });\n      if (onBebidaAdicionada) onBebidaAdicionada();\n\n      // Atualiza os pinpoints no cluster\n      if (isLoggedIn && mapRef.current && clusterLayerRef.current) {\n        clusterLayerRef.current.clearLayers();\n        fetch('http://localhost:8000/beer_budies/api/minhas_bebidas/', {\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('access')}`\n          }\n        }).then(res => res.json()).then(data => {\n          if (Array.isArray(data)) {\n            data.forEach(bebida => {\n              if (bebida.coordenadas) {\n                const [lat, lng] = bebida.coordenadas.split(',').map(Number);\n                const marker = L.marker([lat, lng], {\n                  icon: customIcon\n                }).bindPopup(`<h3>${bebida.evento || 'Evento'}</h3><p>${bebida.local || ''}</p>`);\n                clusterLayerRef.current.addLayer(marker);\n              }\n            });\n          }\n        });\n      }\n    } else {\n      alert('Erro ao registar bebida.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"map-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"map\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }, this), isLoggedIn && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"button-container\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button-mapa\",\n        onClick: () => setShowForm(v => !v),\n        children: showForm ? \"Fechar formulário\" : \"Diz-me onde e quando!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `slide-form-container${showForm && isLoggedIn ? \" open\" : \"\"}`,\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"evento-form\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Onde bebeste?*\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"local\",\n            value: formData.local,\n            onChange: handleChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Nome do evento:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"evento\",\n            value: formData.evento,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Quantas cervejas bebeste?*\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: \"cervejas\",\n            value: formData.cervejas,\n            onChange: handleChange,\n            min: \"1\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Coordenadas (lat,lng)*:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"geobutton\",\n          type: \"button\",\n          onClick: () => {\n            if (navigator.geolocation) {\n              navigator.geolocation.getCurrentPosition(pos => {\n                const coords = `${pos.coords.latitude},${pos.coords.longitude}`;\n                setFormData(f => ({\n                  ...f,\n                  coordenadas: coords\n                }));\n                if (coordenadasInputRef.current) {\n                  coordenadasInputRef.current.focus();\n                }\n              }, () => alert(\"Não foi possível obter a localização.\"));\n            } else {\n              alert(\"Geolocalização não suportada.\");\n            }\n          },\n          children: \"Usar a minha localiza\\xE7\\xE3o\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"coordenadas\",\n          value: formData.coordenadas,\n          onChange: handleChange,\n          placeholder: \"Ex: 38.7544,-9.1526\",\n          required: true,\n          ref: coordenadasInputRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"submit-button\",\n          children: \"Enviar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }, this), !isLoggedIn && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"center\",\n        marginTop: \"2rem\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Faz login para meteres onde andaste a beber!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 172,\n    columnNumber: 9\n  }, this);\n}\n_s(Mapa, \"M9O9jheDzzuvRqeUkzN/tvPQ6Zo=\");\n_c = Mapa;\nexport default Mapa;\nvar _c;\n$RefreshReg$(_c, \"Mapa\");","map":{"version":3,"names":["React","useEffect","useState","useRef","L","jsxDEV","_jsxDEV","Mapa","onBebidaAdicionada","_s","showForm","setShowForm","formData","setFormData","local","evento","cervejas","coordenadas","isLoggedIn","setIsLoggedIn","localStorage","getItem","mapRef","coordenadasInputRef","clusterLayerRef","customIcon","icon","iconUrl","require","iconSize","interval","setInterval","clearInterval","map","current","setView","tileLayer","maxZoom","addTo","hasLayer","removeLayer","clearLayers","myClusterLayer","markerClusterGroup","iconCreateFunction","cluster","divIcon","html","getChildCount","addLayer","handleMapClick","e","coords","latlng","lat","lng","f","setTimeout","focus","on","off","fetch","headers","then","res","json","data","Array","isArray","forEach","bebida","split","Number","marker","bindPopup","handleChange","target","name","value","handleSubmit","preventDefault","response","method","body","JSON","stringify","ok","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","id","onClick","v","onSubmit","type","onChange","required","min","navigator","geolocation","getCurrentPosition","pos","latitude","longitude","placeholder","ref","style","textAlign","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/joaoc/Documents/GitHub/DIAM-PROJETO/beer_budies_frontend/src/Pages/mapa.js"],"sourcesContent":["//para correr o mapa é necessário fazer \"c\" e \"npm install leaflet.markercluster\"\r\n//localStorage.setItem('token', 'fake-token'); // Simula o login do utilizador\r\n//localStorage.removeItem('token'); // Simula o logout do utilizador\r\n//localStorage.clear(); // Limpa o localStorage\r\n\r\nimport React, { useEffect, useState, useRef } from 'react';\r\nimport '../cssFiles/mapa.css';\r\nimport * as L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport 'leaflet.markercluster';\r\n\r\nfunction Mapa({ onBebidaAdicionada }) {\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [formData, setFormData] = useState({\r\n        local: '',\r\n        evento: '',\r\n        cervejas: '',\r\n        coordenadas: ''\r\n    });\r\n\r\n    const [isLoggedIn, setIsLoggedIn] = useState(!!localStorage.getItem('access'));\r\n    const mapRef = useRef(null);\r\n    const coordenadasInputRef = useRef(null);\r\n    const clusterLayerRef = useRef(null);\r\n\r\n    const customIcon = L.icon({\r\n        iconUrl: require('../Icons/PINGbeer.png'),\r\n        iconSize: [38, 38],\r\n    });\r\n\r\n    useEffect(() => {\r\n        const interval = setInterval(() => {\r\n            setIsLoggedIn(!!localStorage.getItem('access'));\r\n        }, 500);\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        let map = mapRef.current;\r\n        if (!map) {\r\n            map = L.map(\"map\").setView([38.75441377685015, -9.152601469815817], 13);\r\n            mapRef.current = map;\r\n            L.tileLayer(\"https://tile.openstreetmap.org/{z}/{x}/{y}.png\", {\r\n                maxZoom: 19,\r\n            }).addTo(map);\r\n        }\r\n        // Remove cluster layer antigo se existir\r\n        if (clusterLayerRef.current) {\r\n            if (map.hasLayer(clusterLayerRef.current)) {\r\n                map.removeLayer(clusterLayerRef.current);\r\n            }\r\n            clusterLayerRef.current.clearLayers();\r\n        }\r\n        const myClusterLayer = L.markerClusterGroup({\r\n            iconCreateFunction: function(cluster) {\r\n                return L.divIcon({\r\n                    html: '<div class=\"cluster-div\">' + cluster.getChildCount() + '</div>',\r\n                });\r\n            }\r\n        });\r\n        clusterLayerRef.current = myClusterLayer;\r\n        map.addLayer(myClusterLayer);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (mapRef.current && clusterLayerRef.current && mapRef.current.hasLayer(clusterLayerRef.current)) {\r\n                mapRef.current.removeLayer(clusterLayerRef.current);\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!mapRef.current) return;\r\n\r\n        const handleMapClick = function(e) {\r\n            const coords = `${e.latlng.lat},${e.latlng.lng}`;\r\n            setFormData((f) => ({ ...f, coordenadas: coords }));\r\n            setShowForm(true);\r\n            setTimeout(() => {\r\n                if (coordenadasInputRef.current) {\r\n                    coordenadasInputRef.current.focus();\r\n                }\r\n            }, 100);\r\n        };\r\n\r\n        mapRef.current.on('click', handleMapClick);\r\n\r\n        // Cleanup: remove event listener on unmount\r\n        return () => {\r\n            mapRef.current.off('click', handleMapClick);\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (\r\n            isLoggedIn &&\r\n            mapRef.current &&\r\n            clusterLayerRef.current &&\r\n            mapRef.current.hasLayer(clusterLayerRef.current)\r\n        ) {\r\n            clusterLayerRef.current.clearLayers();\r\n            fetch('http://localhost:8000/beer_budies/api/minhas_bebidas/', {\r\n                headers: {\r\n                    'Authorization': `Bearer ${localStorage.getItem('access')}`\r\n                }\r\n            })\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                if (Array.isArray(data)) {\r\n                    data.forEach(bebida => {\r\n                        if (bebida.coordenadas) {\r\n                            const [lat, lng] = bebida.coordenadas.split(',').map(Number);\r\n                            const marker = L.marker([lat, lng], {icon: customIcon})\r\n                                .bindPopup(`<h3>${bebida.evento || 'Evento'}</h3><p>${bebida.local || ''}</p>`);\r\n                            clusterLayerRef.current.addLayer(marker);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }, [isLoggedIn, customIcon]);\r\n\r\n    const handleChange = (e) => {\r\n        setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const response = await fetch('http://localhost:8000/beer_budies/api/adicionar_bebida/', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${localStorage.getItem('access')}`\r\n            },\r\n            body: JSON.stringify(formData)\r\n        });\r\n        if (response.ok) {\r\n            alert('Bebida registada com sucesso!');\r\n            setShowForm(false);\r\n            setFormData({ local: '', evento: '', cervejas: '', coordenadas: '' });\r\n            if (onBebidaAdicionada) onBebidaAdicionada();\r\n\r\n            // Atualiza os pinpoints no cluster\r\n            if (isLoggedIn && mapRef.current && clusterLayerRef.current) {\r\n                clusterLayerRef.current.clearLayers();\r\n                fetch('http://localhost:8000/beer_budies/api/minhas_bebidas/', {\r\n                    headers: {\r\n                        'Authorization': `Bearer ${localStorage.getItem('access')}`\r\n                    }\r\n                })\r\n                .then(res => res.json())\r\n                .then(data => {\r\n                    if (Array.isArray(data)) {\r\n                        data.forEach(bebida => {\r\n                            if (bebida.coordenadas) {\r\n                                const [lat, lng] = bebida.coordenadas.split(',').map(Number);\r\n                                const marker = L.marker([lat, lng], {icon: customIcon})\r\n                                    .bindPopup(`<h3>${bebida.evento || 'Evento'}</h3><p>${bebida.local || ''}</p>`);\r\n                                clusterLayerRef.current.addLayer(marker);\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        } else {\r\n            alert('Erro ao registar bebida.');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"map-container\">\r\n            <h1></h1>\r\n            <div className=\"map-wrapper\">\r\n                <div id=\"map\"></div>\r\n            </div>\r\n\r\n            {isLoggedIn && (\r\n                <div className=\"button-container\">\r\n                    <button\r\n                        className=\"button-mapa\"\r\n                        onClick={() => setShowForm(v => !v)}\r\n                    >\r\n                        {showForm ? \"Fechar formulário\" : \"Diz-me onde e quando!\"}\r\n                    </button>\r\n                </div>\r\n            )}\r\n\r\n            <div className={`slide-form-container${showForm && isLoggedIn ? \" open\" : \"\"}`}>\r\n                <form className=\"evento-form\" onSubmit={handleSubmit}>\r\n                    <label>\r\n                        Onde bebeste?*\r\n                        <input\r\n                            type=\"text\"\r\n                            name=\"local\"\r\n                            value={formData.local}\r\n                            onChange={handleChange}\r\n                            required\r\n                        />\r\n                    </label>\r\n                    <label>\r\n                        Nome do evento:\r\n                        <input\r\n                            type=\"text\"\r\n                            name=\"evento\"\r\n                            value={formData.evento}\r\n                            onChange={handleChange}\r\n                        />\r\n                    </label>\r\n                    <label>\r\n                        Quantas cervejas bebeste?*\r\n                        <input\r\n                            type=\"number\"\r\n                            name=\"cervejas\"\r\n                            value={formData.cervejas}\r\n                            onChange={handleChange}\r\n                            min=\"1\"\r\n                            required\r\n                        />\r\n                    </label>\r\n                    <label>\r\n                        Coordenadas (lat,lng)*:\r\n                    </label>\r\n                    <button className='geobutton'\r\n                        type=\"button\"\r\n                        onClick={() => {\r\n                            if (navigator.geolocation) {\r\n                                navigator.geolocation.getCurrentPosition(\r\n                                    (pos) => {\r\n                                        const coords = `${pos.coords.latitude},${pos.coords.longitude}`;\r\n                                        setFormData((f) => ({ ...f, coordenadas: coords }));\r\n                                        if (coordenadasInputRef.current) {\r\n                                            coordenadasInputRef.current.focus();\r\n                                        }\r\n                                    },\r\n                                    () => alert(\"Não foi possível obter a localização.\")\r\n                                );\r\n                            } else {\r\n                                alert(\"Geolocalização não suportada.\");\r\n                            }\r\n                        }}\r\n                    >\r\n                        Usar a minha localização\r\n                    </button>\r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"coordenadas\"\r\n                        value={formData.coordenadas}\r\n                        onChange={handleChange}\r\n                        placeholder=\"Ex: 38.7544,-9.1526\"\r\n                        required\r\n                        ref={coordenadasInputRef}\r\n                    />\r\n                    <button type=\"submit\" className='submit-button'>Enviar</button>\r\n                </form>\r\n            </div>\r\n\r\n            {!isLoggedIn && (\r\n                <div style={{ textAlign: \"center\", marginTop: \"2rem\" }}>\r\n                    <p>Faz login para meteres onde andaste a beber!</p>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Mapa;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}